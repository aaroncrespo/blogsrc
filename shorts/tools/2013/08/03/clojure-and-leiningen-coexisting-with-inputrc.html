<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title> Clojure and Leiningen Coexisting With inputrc —  &raquo;  Aaron C.</title>
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
<meta name="keywords" content="">
<link rel="canonical" href="https://aaroncrespo.com/shorts/tools/2013/08/03/clojure-and-leiningen-coexisting-with-inputrc.html">
        




<!-- Twitter Cards -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Clojure and Leiningen Coexisting With inputrc" />
<meta name="twitter:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
" />
<meta name="twitter:image" content="https://aaroncrespo.com" />

<!-- Google plus -->
<meta name="author" content="">
<link rel="author" href="">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Clojure and Leiningen Coexisting With inputrc">
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
<meta property="og:url" content="https://aaroncrespo.com/shorts/tools/2013/08/03/clojure-and-leiningen-coexisting-with-inputrc.html">
<meta property="og:site_name" content="Aaron C.">

        <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/vendor/normalize-css/normalize.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/assets/vendor/highlight/styles/solarized_dark.css">
<link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.css">
    </head>

    <body>
        <div class="wrapper">
            <header class="header">
    <div class="navigation">
        <a href="/" class="logo">Aaron C.</a>

        <ul class="menu">
            <li class="menu__entry"><a href="/about">About</a></li>
            <li class="menu__entry"><a href="/">Blog</a></li>
        </ul>
    </div>

    <ul class="social-links">
        
            <a href="https://github.com/aaroncrespo" class="social-links__entry" target="_blank">
                <i class="fa fa-github"></i>
            </a>
        

        
            <a href="https://twitter.com/aaroncrespo" class="social-links__entry" target="_blank">
                <i class="fa fa-twitter"></i>
            </a>
        
    </ul>
</header>

            <h1 class="page-title post-title">
    <div class="page-title__text post-title__text">Clojure and Leiningen Coexisting With inputrc</div>
    <div class="page-title__subtitle post-title__subtitle"></div>
</h1>

<div class="content">
    <p>It is common to remap bash history keys with an <code class="highlighter-rouge">inputrc </code> file.<br />
For example the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="s2">"</span><span class="se">\e</span><span class="s2">[B"</span>: <span class="nb">history</span>-search-forward
<span class="s2">"</span><span class="se">\e</span><span class="s2">[A"</span>: <span class="nb">history</span>-search-backward
</code></pre>
</div>

<p>Will allow you to search your bash history with arrow keys forward and back based on the already entered string. If there is no string it will behave as “usual”. Similar to zsh’s history search.</p>

<p>However if you have ever tried to toy with a clojure REPL with these settings you probably have, or will, notice that your history doesn’t work how you would expect it to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">user=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">zero?</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="n">false</span><span class="w">
</span><span class="c1">;; Press up
</span><span class="p">(</span><span class="nf">reverse-i-search</span><span class="p">)</span><span class="o">`'</span><span class="err">:</span><span class="w">
</span></code></pre>
</div>

<p>A <a href="https://github.com/jline/jline2/issues/51">bug</a> in jline (a command parsing library leiningen uses) causes it to mis-interpret a user’s .inputrc. Needless to say having no history in a REPL is a significant impediment. So lets fix it:</p>

<p>We can either create a local leiningen repository and point it to a newer version of jline with the bug fixed. Or we can temporarily overwrite the self configuring behavior. Jline is <a href="https://github.com/jline/jline2/wiki/Configuration-Properties">configured</a> via its own <code class="highlighter-rouge">.jline.rc</code>. The default behavior looks for your <code class="highlighter-rouge">.inputrc</code>, it will then try and automagically configure itself to match your environment.</p>

<p>The location of your input.rc is configurable within jline so that a jline specific inputrc configuration settings can be used. The default setting unsurprisingly points to your inputrc:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jline.inputrc<span class="o">=</span><span class="nv">$HOME</span>/.inputrc
</code></pre>
</div>
<p>To set a custom configuration you can make a new inputrc configured to your preference (for now without history key re-maps). Or, if you are okay with the default bash like behavior point it to a blank file.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># in a .jline.rc file in $HOME</span>
jline.inputrc<span class="o">=</span><span class="nv">$HOME</span>/.none
</code></pre>
</div>
<p>Restart your REPL or terminal and your history will work how you expect again.</p>

</div>

<div class="about">
    <div class="about__devider">*****</div>
    <div class="about__text">
        Written by <strong>  Aaron C. </strong>
        on <strong>03 August 2013</strong>
    </div>
</div>


        </div>

        <script src="/assets/vendor/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

        
    </body>
</html>
